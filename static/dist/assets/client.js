function s(){const e=document.querySelector("#strength-input"),t=document.querySelector("#dexterity-input"),n=document.querySelector("#constitution-input"),o=document.querySelector("#intelligence-input"),c=document.querySelector("#wisdom-input"),i=document.querySelector("#charisma-input");e.addEventListener("change",function(){r()}),t.addEventListener("change",function(){h()}),n.addEventListener("change",function(){g()}),o.addEventListener("change",function(){_()}),c.addEventListener("change",function(){p()}),i.addEventListener("change",function(){y()})}function r(){const e=document.querySelector("#strength-input"),t=document.querySelector("#strength-modifier"),n=d(e);u(t,n)}function h(){const e=document.querySelector("#dexterity-input"),t=document.querySelector("#dexterity-modifier"),n=d(e);u(t,n)}function g(){const e=document.querySelector("#constitution-input"),t=document.querySelector("#constitution-modifier"),n=d(e);u(t,n)}function _(){const e=document.querySelector("#intelligence-input"),t=document.querySelector("#intelligence-modifier"),n=d(e);u(t,n)}function p(){const e=document.querySelector("#wisdom-input"),t=document.querySelector("#wisdom-modifier"),n=d(e);u(t,n)}function y(){const e=document.querySelector("#charisma-input"),t=document.querySelector("#charisma-modifier"),n=d(e);u(t,n)}function u(e,t){e.textContent="("+t.toString()+")"}function d(e){const t=e.value;return Math.floor((parseInt(t)-10)/2)}const a=io();document.addEventListener("DOMContentLoaded",()=>{name=sessionStorage.getItem("charName"),char_id=sessionStorage.getItem("charId");const e=document.querySelector(".max-health");e.addEventListener("change",function(){S(e.value)}),f(),s()});function f(){a.emit("register_name",{name,char_id})}function v(){const e=document.getElementById("msg").value;e&&(a.emit("message_to_dm",{message:e,char_id,char_name:name}),m("You",e),document.getElementById("msg").value="")}function E(e){const t=document.getElementById("chat"),n=document.createElement("p"),o=e.indexOf(":");let c=e.slice(0,o);c!=="DM"&&(c="You");const i=e.slice(o+1);n.innerHTML=`<strong>${c}:</strong> ${i}`,t.appendChild(n),t.scrollTop=t.scrollHeight}function m(e,t){const n=document.getElementById("chat"),o=document.createElement("p");o.innerHTML=`<strong>${e}:</strong> ${t}`,n.appendChild(o),n.scrollTop=n.scrollHeight}function l(){const e=parseFloat(document.getElementById("heal-input").value)||0,t=parseFloat(document.getElementById("damage-input").value||0),n=document.getElementById("health-num");let c=(parseFloat(n.textContent)||0)-t+e;const i=document.querySelector(".max-health").value;c>i&&(c=i),n.textContent=c.toString(),document.getElementById("heal-input").value="",document.getElementById("damage-input").value="",a.emit("client_update_health",{result:c,char_id})}function x(e){const t=document.querySelector(".initiative-input-container");t.style.display="flex",t.querySelector("#combat-id").textContent=e}function S(){const e=document.querySelector(".max-health");a.emit("client_update_max_health",{max_health:e.value,char_id})}function I(e){const t=document.querySelector(".max-health");t.value=e}a.on("host_update_max_health",e=>{const t=e.max_health;I(t)});a.on("load_message",e=>{E(e.message)});a.on("private_message",e=>{m(e.from,e.message),document.getElementById("chat-area").classList.contains("mobile-hidden")&&(document.getElementById("toggle-chat").style.backgroundColor="red")});a.on("send_image",e=>{let t=e.n;t==null&&(t=!0);const n=document.createElement("div");n.classList.add("image-box");const o=document.createElement("img");o.src=e.url,o.alt="Shared by DM",n.appendChild(o),document.getElementById("images").appendChild(n);const c=document.getElementById("image-area");t&&c.classList.contains("mobile-hidden")&&(document.getElementById("toggle-imgs").style.backgroundColor="red")});a.on("host_update_health",({result:e,client_id:t})=>{const n=document.getElementById("health-num");n.textContent=e.toString()});a.on("host_change_armor_class",({value:e})=>{const t=document.getElementById("ac-input");t.value=e});a.on("initialize_combat",({combat_id:e})=>{x(e)});document.addEventListener("DOMContentLoaded",function(){document.getElementById("heal-input").addEventListener("change",function(e){l()}),document.getElementById("damage-input").addEventListener("change",function(e){l()}),document.getElementById("msg").addEventListener("change",function(e){v()}),document.getElementById("ac-input").addEventListener("change",function(e){const t=document.getElementById("ac-input").value;a.emit("client_change_armor_class",{value:t,char_id})})});
